sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageBox"],function(e,t){"use strict";return e.extend("approval2ui.controller.View1",{onInit:function(){var e=new sap.ui.model.json.JSONModel;e.setData({employee:{firstName:"test",lastName:"",country:"",hireDate:"",jobTitle:""}});this.getView().setModel(e,"employee");var t="/employee/";this.getView().bindElement("employee>"+t)},onPressSend:function(){var e=this.getView().getModel("employee").getProperty("/employee");var r=e.hireDate.getDate().toString();var o=e.hireDate.getMonth().toString();var a=e.hireDate.getFullYear().toString();if(o.length<2)o="0"+o;if(r.length<2)r="0"+r;var n=a.concat("-",o,"-",r);var i={definitionId:"workflowapproval2",context:{empData:{firstName:e.firstName,lastName:e.lastName,country:e.Country,hireDate:n,jobTitle:e.jobTitle}}};$.ajax({url:"/approval2ui/bpmworkflowruntime/v1/xsrf-token",method:"GET",headers:{"X-CSRF-Token":"Fetch"},async:false,success:function(e,r,o){var a=o.getResponseHeader("X-CSRF-Token");$.ajax({url:"/approval2ui/bpmworkflowruntime/v1/workflow-instances",type:"POST",data:JSON.stringify(i),headers:{"X-CSRF-Token":a,"Content-Type":"application/json"},async:false,success:function(e){t.success("The workflow is started")},error:function(e){t.error("Error in starting worklow")}})},error:function(e){t.error("Error in starting worklow")}})}})});